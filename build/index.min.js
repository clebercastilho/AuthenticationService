var express=require("express"),bodyParser=require("body-parser"),controller=require("./user_controller.min"),database=require("./db_model.min"),util=require("./util.min"),app=express();app.use(bodyParser.json()),app.use(express["static"](__dirname+"/public")),app.set("port",process.env.PORT||4123),app.set("views",__dirname+"/views"),app.set("view engine","ejs"),database.config(),app.get("/",function(e,a){a.render("pages/index")}),app.get("/api/usuario/obter/:id",function(e,a){if(!e.headers.authentication)return void a.status(401).json(util.generateErrorMessage("NÃ£o autorizado"));var r=e.params.id,t=e.headers.authentication;controller.obter(r,t,function(e){a.status(e.status).json(e.body)})}),app.post("/api/usuario/cadastrar",function(e,a){var r=e.body;controller.criar(r,function(e){a.status(e.status).json(e.body)})}),app.post("/api/usuario/autenticar",function(e,a){var r=e.body;controller.autenticar(r,function(e){a.status(e.status).json(e.body)})}),app.listen(app.get("port"),function(){console.log("API iniciada, usando express, na porta",app.get("port"))}),module.exports=app;